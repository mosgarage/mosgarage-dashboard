.\" Automatically generated by Pandoc 2.19.2
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "" "" "" "" ""
.hy
.SS SYNOPSIS
.PP
\f[B]clrtrust\f[R] is a tool for generating and managing a centralized
trusted certificate store.
.PP
\f[V]clrtrust [-v|--verbose] [-h|--help] [-c|--internal-rehash] <command> [options]\f[R]
.SS DESCRIPTION
.PP
A trust store contains a set of X.509 certificates which the operating
system and applications should consider trustworthy.
.PP
The \f[V]clrtrust\f[R] tool provides a frontend for centralized trust
store management.
It allows for adding (trusting) and removing (distrusting) certificate
authorities (CAs).
It also provides maintenance commands for viewing and re-generating the
trust store.
.PP
Certificates can be provided by the operating system for out-of-box
functionality.
Certificates can also be provided and modified by privileged users.
.PP
It is up to each application to make use of the trust store generated by
\f[V]clrtrust\f[R].
.SS OPTIONS
.IP
.nf
\f[C]
Usage: clrtrust [-v|--verbose] [-h|--help] [-c|--internal-rehash] <command> [options]

    -v | --verbose          Shows more details about execution
    -c | --internal-rehash  Forces use of internal implementation of c_rehash
    -h | --help             Prints this message

    Commands
        generate    generates the trust store
        list        list CAs
        add         add trust to a CA
        remove      remove trust to a CA
        restore     restore trust to previously removed CA
        check       sanity/consistency check of the trust store

clrtrust <command> --help to get help on specific command.
\f[R]
.fi
.PP
\f[B]Commands that modify the trust store require root privileges.\f[R]
.IP \[bu] 2
\f[V]clrtrust generate [-f|--force]\f[R]
.RS 2
.PP
The \f[V]generate\f[R] command has no arguments and generates a unified
trust store composed of system-provided and user-provided certificates,
if any.
The optional \f[V]--force\f[R] parameter will forcibly generate the
trust store, even if it results in an empty store.
See the FILES section for paths used for trust store generation.
.RE
.IP \[bu] 2
\f[V]clrtrust list\f[R]
.RS 2
.PP
The \f[V]list\f[R] command has no arguments and outputs a list of
trusted certificates with the following fields:
.PP
\f[V]id\f[R] uniquely identifies the certificate.
It can be used as input to other \f[V]clrtrust\f[R] commands such as
\f[V]remove\f[R] or \f[V]restore\f[R].
.PP
\f[V]File\f[R] contains the file path of the certificate in the trust
store.
.PP
\f[V]Authority\f[R] shows the name of the organization that issued the
certificate.
This field is extracted from the certificate file.
.PP
\f[V]Expires\f[R] shows the expiration date of the certificate.
This field is extracted from the certificate file.
.RE
.IP \[bu] 2
\f[V]clrtust add [<certificateFile> ...] [-f|--force]\f[R]
.RS 2
.PP
The \f[V]add\f[R] command takes one or more certificates as required
argument(s).
The certificate is identified by a file path.
The certificate file(s) must be PEM-encoded with only one certificate
per file.
The optional \f[V]--force\f[R] parameter will forcibly add the
certificate to the trust store, even if it is not a root CA.
.PP
Adding a root CA to the trust store allows applications using the trust
store to trust the root CA certificate, trust certificate chains issued
by the authority, verify the authenticity of peer\[cq]s certificate, and
establish a connection.
.RE
.IP \[bu] 2
\f[V]clrtrust remove [<certificateFile|id> ...]\f[R]
.RS 2
.PP
The \f[V]remove\f[R] command takes one or more certificates as required
argument(s).
The certificate is identified by a file path or \f[V]id\f[R].
The argument can be an \f[V]id\f[R] of the certificate (see the
\f[V]list\f[R] command) or the file path of the certificate.
.PP
Removing a root CA from the trust store distrusts the certificate for
applications using the trust store.
Certificate chains issued by the authority will no longer be trusted,
authenticity of the peer\[cq]s certificate will no longer be verified,
and a connection will not be established.
.RE
.IP \[bu] 2
\f[V]clrtrust check\f[R]
.RS 2
.PP
The \f[V]check\f[R] command has no arguments and validate the
consistency of a previously generated unified trust store.
.RE
.SS EXAMPLES
.SS View the list of trusted CAs
.PP
\f[V]clrtrust list\f[R]
.PP
The command above outputs a list of trusted certificates in the format
below:
.IP
.nf
\f[C]
id: FA:B7:EE:36:97:26:62:FB:2D:B0:2A:F6:BF:03:FD:E8:7C:4B:2F:9B
File: /var/cache/ca-certs/anchors/certSIGN_ROOT_CA.crt
Authority: /C=RO/O=certSIGN/OU=certSIGN ROOT CA
Expires: Jul  4 17:20:04 2031 GMT
\f[R]
.fi
.PP
The certificate can be further inspected using the
\f[V]openssl x509\f[R] command.
For example:
.IP
.nf
\f[C]
openssl x509 -in /var/cache/ca-certs/anchors/certSIGN_ROOT_CA.crt -noout -text
\f[R]
.fi
.SS Add (trust) a root CA
.PP
\f[V]clrtrust add \[ti]/PrivateCA.pem\f[R]
.PP
The command above will add a root CA certificate located in the
\f[V]\[ti]/PrivateCA.pem\f[R] file.
If the certificate file is not in the PEM format, use
\f[V]openssl x509\f[R] command to convert to PEM first.
For example:
.IP
.nf
\f[C]
openssl x509 -in PrivateCA.cer -inform der -out PrivateCA.pem -outform pem
\f[R]
.fi
.SS Remove (distrust) a root CA
.PP
\f[V]clrtrust remove \[ti]/PrivateCA.pem\f[R]
.PP
The command above will remove a root CA certificate located in the
\f[V]\[ti]/PrivateCA.pem\f[R] file from the trust store and distrust it.
.SS FILES
.PP
\f[I]/var/cache/ca-certs\f[R]
.PP
Generated directory of certificates and verification keys.
Do not modify contents outside of \f[V]clrtrust\f[R].
.PP
\f[I]/usr/share/ca-certs/\f[R]
.PP
Operating-system provided certificates and keys.
Do not modify contents outside of \f[V]clrtrust\f[R].
.PP
\f[I]/etc/ca-certs/\f[R]
.PP
Generated directory of user-supplied certificates and verification keys.
Do not modify contents outside of \f[V]clrtrust\f[R].
.SS BUGS
.PP
See GitHub Issues: <https://github.com/clearlinux/clrtrust/issues>
.SS SEE ALSO
.PP
\f[B]openssl(1)\f[R]
