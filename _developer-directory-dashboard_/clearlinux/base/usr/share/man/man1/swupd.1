.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SWUPD" 1 "" "" ""
.SH NAME
swupd \- OS software update program
.SH SYNOPSIS
.sp
\fBswupd [subcommand] <flags>\fP
.SH DESCRIPTION
.sp
\fBswupd\fP(1) is an OS\-level software update program that applies updates
to system software.
.sp
The updates are fetched from a central software update server. If a
valid update is found on the server, it can be downloaded and applied.
.sp
The \fBswupd\fP tool can also install and remove bundles, check for
updates without applying them, perform system\-level diagnose of
the system software, and install an OS.
.sp
A \fIversion url\fP server provides version information. This server
notifies the program of available updates.
.sp
A \fIcontent url\fP server (can be the same as \fIversion url\fP server)
provides the file and metadata content for all versions. The content url
server provides metadata in the form of manifests. These Manifest files
list and describe file contents, symlinks, directories. Additionally,
the actual content is provided to clients in the form of archive files.
.sp
\fBswupd\fP consumes update artifacts generated by \fBmixer\fP in the specific
format the installed version of \fBswupd\fP understands. For more information
about how these artifacts are generated see \fBmixer\fP(1) and \fBos\-format\fP(7).
.sp
The \fBswupd\fP tool can also manage 3rd\-party content, this allows users to
install, remove, and update bundles from 3rd\-party repositories.
.SH OPTIONS
.sp
The following options are applicable to most subcommands, and can be
used to modify the core behavior and resources that swupd uses.
.INDENT 0.0
.TP
.B  \-h\fP,\fB  \-\-help
Display general help information. If put after a subcommand, it
will display help specific to that subcommand.
.TP
.B  \-v\fP,\fB  \-\-version
Displays the version information of the swupd program, and exit.
It also displays compile options and copyright information.
.TP
.BI \-p \ <path>\fR,\fB \ \-\-path\fB= <path>
Optionally set the top\-level directory for the
swupd\-managed system. This can be used to point to a chroot installation
of the OS or a custom mount. If not specified this will default to \fB/\fP\&.
.TP
.BI \-u \ <url>\fR,\fB \ \-\-url\fB= <url>
Specify an RFC\-3986 encoded url. The url will be used to
download version information and file content downloads.
.TP
.BI \-P \ <port>\fR,\fB \ \-\-port\fB= <port>
Specify the port number of the server to connect to.
Applies to both version and file content url server connections.
.TP
.BI \-c \ <url>\fR,\fB \ \-\-contenturl\fB= <url>
Specify an RFC\-3986 encoded url. The url will be
used for file content downloads only.
.TP
.BI \-v \ <url>\fR,\fB \ \-\-versionurl\fB= <url>
Specify an RFC\-3986 encoded url. The url will be
used to download version information.
.TP
.BI \-F \ <formatstring>\fR,\fB \ \-\-format\fB= <formatstring>
Specify the format suffix for
version file downloads. Is usually one of \fB1\fP, \fB2\fP, \fB3\fP, etc. or
\fBstaging\fP\&. Software update formats may change regularly and normally
you should consult the swupd server data for the appropriate latest
version available. If that version is not supported by your version of
\fBswupd\fP, you should subtract \fB1\fP from the number and try again until
it succeeds.
.TP
.BI \-S \ <path>\fR,\fB \ \-\-statedir\fB= <path>
Specify an alternate path for swupd cache and data directory.
Normally \fBswupd\fP uses \fB/var/lib/swupd\fP\&.
.TP
.BI \-K \ <path>\fR,\fB \ \-\-cachedir\fB= <path>
Specify an alternate swupd cache directory.
Normally \fBswupd\fP uses \fB/var/lib/swupd\fP\&.
.TP
.BI \-Z \ <path>\fR,\fB \ \-\-datadir\fB= <path>
Specify an alternate swupd data directory.
Normally \fBswupd\fP uses \fB/var/lib/swupd\fP\&.
.TP
.BI \-C \ <path>\fR,\fB \ \-\-certpath\fB= <cert>
Specify alternate path to swupd certificate store (pem file).
Default is /usr/share/clear/update\-ca/Swupd_Root.pem
.TP
.BI \-W \ <n>\fR,\fB \ \-\-max\-parallel\-downloads\fB= <n>
Set the maximum number of parallel downloads.
.TP
.BI \-r \ <n>\fR,\fB \ \-\-max\-retries\fB= <n>
Maximum number of retries for download failures.
.TP
.BI \-d \ <n>\fR,\fB \ \-\-retry\-delay\fB= <n>
Initial delay in seconds between download retries, this will
be doubled for each retry until the download succeeds or the maximum
number of retries has been reached.
.TP
.B  \-n\fP,\fB  \-\-nosigcheck
Do not attempt to enforce certificate or signature checking.
.TP
.B  \-n\fP,\fB  \-\-nosigcheck\-latest
Do not attempt to enforce signature checking when
retrieving the latest version number.
.TP
.B  \-I\fP,\fB  \-\-ignore\-time
Ignore system/certificate time when validating signature.
.TP
.B  \-t\fP,\fB  \-\-time
Show verbose time output for swupd operations.
.TP
.B  \-N\fP,\fB  \-\-no\-scripts
Do not run the post\-update scripts and boot update tool.
.TP
.B  \-b\fP,\fB  \-\-no\-boot\-update
Do not update the boot files using clr\-boot\-manager.
.TP
.B  \-j\fP,\fB  \-\-json\-output
Prints the swupd output as a machine readable JSON stream.
.TP
.B  \-y\fP,\fB  \-\-yes
Assume yes as answer to all prompts and run non\-interactively.
.TP
.B  \-\-allow\-insecure\-http
For security reasons, swupd only allows system updates
using secure https connections by default. This option forces swupd
to allow updates over insecure http connections.
.sp
\fBWarning\fP: although it is not recommended, if an http server is
set up as the upstream server, the \fIallow_insecure_http=true\fP option will
need to be setup in the swupd configuration file for the autoupdate
command to continue to work.
.TP
.B  \-\-quiet
Sets \fIswupd\fP to print a minimal and more stable output that is easier
to parse for its commands. Only the most relevant information and errors
are printed out.
Output displayed when using this option is rarely going to change, so
this is a good option to use when writing scripts that use \fIswupd\fP\&.
.TP
.B  \-\-verbose
Enable verbosity for commands.
.TP
.B  \-\-debug
Print extra information to help debugging problems.
.TP
.B  \-\-no\-progress
Don\(aqt print progress report on commands that informs the
percentage left in current operation.
.TP
.B  \-\-wait\-for\-scripts
Wait for the post\-update scripts to complete.
.TP
.BI \-\-assume\fB= <yes|no>
Sets an automatic response to all prompts and run
non\-interactively.
.UNINDENT
.SH SUBCOMMANDS
.SS info
.INDENT 0.0
.INDENT 3.5
Shows the current OS version and the URLs used for updates.
.UNINDENT
.UNINDENT
.SS autoupdate
.INDENT 0.0
.INDENT 3.5
Enables or disables automatic updates, or reports current
status. Enabling updates does not cause an immediate update \-
use \fBswupd update\fP to force one if desired.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-\-enable
Enable autoupdates
.TP
.B  \-\-disable
Disable autoupdates
.UNINDENT
.SS check\-update
.INDENT 0.0
.INDENT 3.5
Checks whether an update is available and prints out the information
if so. Does not download update content.
.UNINDENT
.UNINDENT
.SS update
.INDENT 0.0
.INDENT 3.5
Performs a system software update.
.sp
The program will contact the version server at the version url, and
check to see if a system software update is available. If an update
is available, the update content will be downloaded from the content
url and stored in the \fI/var/lib/swupd\fP state path. Once all content
is downloaded and verified, the update is applied to the system.
.sp
In case any problem arises during a software update, the program
attempts to correct the issue, possibly by performing a \fBswupd repair\fP
operation, which corrects broken or missing files and other issues.
.sp
After the update is applied, the system performs an array of
post\-update actions. These actions are triggered through \fIsystemd(1)\fP
and reside in the \fIupdate\-triggers.target(4)\fP system target.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Update to a specific version, also accepts \(aqlatest\(aq (default).
.TP
.B  \-s\fP,\fB  \-\-status
Do not perform an update, instead display whether an update is
available on the version url server, and what version number is
available. This is the same as running \fBswupd check\-update\fP\&.
.TP
.B  \-k\fP,\fB  \-\-keepcache
Do not delete the swupd state directory content after
updating the system.
.TP
.B  \-\-download
Do not perform an update, instead download all resources needed
to perform the update, and exit.
.TP
.B  \-\-update\-search\-file\-index
Update the index used by search\-file to speed up
searches. Don\(aqt enable this if you have download or space restrictions.
.TP
.B  \-\-3rd\-party
If update is successfull, also update content from 3rd\-party
repositories.
.UNINDENT
.SS bundle\-add <bundles>
.INDENT 0.0
.INDENT 3.5
Installs new software bundles. Any bundle name listed after \fBbundle\-add\fP
will be installed in the system. A list of all existing bundles can be
displayed with the \fBbundle\-list \-\-all\fP command.
.sp
The names can also be aliases that are not actual bundles names but instead
are names in an alias configuration file. See \fBswupd\-alias\fP(7)
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-\-skip\-optional
Do not install optional bundles (\fIalso\-add\fP flag in
Manifests).
A bundle may include other bundles that will also get installed
when installing the bundle that includes them. This included bundles
can be either optional, or mandatory. Optional bundles can be skipped
at install time by using this option.
.TP
.B  \-\-skip\-diskspace\-check
Skip checking for available disk space before installing
a bundle.
By default, swupd attempts to determine if there is enough free
disk space to add the passed in bundle before attempting to install.
The current implementation will check free space in \fB/usr/\fP by default,
or it will check the passed in \-\-path option with \fB/usr/\fP appended.
.UNINDENT
.SS bundle\-remove <bundles>
.INDENT 0.0
.INDENT 3.5
Removes software bundles. Any bundle name listed after \fBbundle\-remove\fP
will be removed from the system. If the bundle is required by another
bundle(s) on the system, a tree will be displayed to indicate which bundles
are blocking removal.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-x\fP,\fB  \-\-force
Removes a bundle along with all the bundles that depend on it.
.sp
\fBWarning\fP: This operation is dangerous and must be used with care since
it can remove many unexpected bundles.
.UNINDENT
.INDENT 0.0
.TP
.B \-R, \-\-recursive Removes a bundle and its dependencies recursively, except for
bundle os\-core.
.sp
\fBWarning\fP: This operation is dangerous and must be used with care since
it can remove many unexpected bundles.
.UNINDENT
.INDENT 0.0
.TP
.B  \-\-orphans
Removes all orphaned bundles. Orphan bundles are those that are no
longer required by any of the tracked bundles.
.sp
\fBWarning\fP: This operation is dangerous and must be used with care since
it can remove many unexpected bundles.
.UNINDENT
.SS bundle\-list
.INDENT 0.0
.INDENT 3.5
List all installed software bundles in the local system. Available bundles
can be listed with the \fB\-\-all\fP option.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-a\fP,\fB  \-\-all
Lists all available software bundles, either installed or not, that
are available.
.TP
.BI \-D \ <bundle>\fR,\fB \ \-\-has\-dep\fB= <bundle>
Displays a list of all bundles which include
the passed BUNDLE as a dependency. Combine with \fB\-\-all\fP to report all
bundles including those not installed on the system. Combine with
\fB\-\-verbose\fP to show a tree of those bundles.
.TP
.B  \-\-status
Show the installation status of the listed bundles. Bundles
installation status can be; \(dqexplicitly installed\(dq, meaning that they
were specifically requested to be installed by the user, or they can be
\(dqimplicitly installed\(dq, meaning they were installed as a dependency of
another explicitly installed bundle.
.TP
.BI \-\-deps\fB= <bundle>
Lists all bundle dependencies of the passed BUNDLE,
including recursively included bundles.
.TP
.B  \-\-orphans
List orphaned bundles. Orphan bundles are those that are installed
but no longer required by any tracked bundle.
.UNINDENT
.SS bundle\-info
.INDENT 0.0
.INDENT 3.5
Display detailed information about a bundle.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Show the bundle info for the specified
version, it also accepts \(aqlatest\(aq.i It defaults to the current version
if no version is specified.
.TP
.B  \-\-dependencies
Show the bundle\(aqs direct and indirect dependencies as well as if
they are optional or mandatory dependencies. Direct dependencies are
those that are specifically included by the bundle in question, while
indirect dependencies are those that are included by the bundles that
are a direct dependency of the bundle in question.
.TP
.B  \-\-files
Show the files directly included in this bundle, in other words it
shows the files included in the bundle\(aqs manifest. If this option is used
along with the \fB\-\-dependencies\fP option, all files installed by the
bundle are listed, including those files installed by the dependencies
of the bundle.
.UNINDENT
.SS search
.INDENT 0.0
.INDENT 3.5
Swupd search functionality is provided by the swupd\-search binary, available
on os\-core\-search bundle.
.sp
For more information run:
.sp
\fB$ swupd search \-\-help\fP
.UNINDENT
.UNINDENT
.SS search\-file <string>
.INDENT 0.0
.INDENT 3.5
Search for matching paths in manifest data. The specified \fI{string}\fP
is matched in any part of the path listed in manifests, and all
matches are printed, including the name of the bundle in which the
match was found.
.sp
If manifest data is not present in the state folder, it is
downloaded from the \fIcontent url\fP\&.
.sp
Because this search consults all manifests, it normally requires to
download all manifests for bundles that are not installed, and may
result in the download of several mega bytes of manifest data.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Search for a match of the given file in the
specified version version.
.TP
.B  \-l\fP,\fB  \-\-library
Restrict search to designated dynamic shared library paths.
.TP
.B  \-B\fP,\fB  \-\-binary
Restrict search to designated program binary paths.
.TP
.BI \-T \ <num_results>\fR,\fB \ \-\-top\fB= <num_results>
Only display the top specified number of
results for each bundle.
.TP
.B  \-m\fP,\fB  \-\-csv
Output the search results in a machine readable CSV format.
.TP
.B  \-i\fP,\fB  \-\-init
Just perform the collection and download of all required manifest
resources needed to perform the search, then exit.
.TP
.BI \-o \ <order>\fR,\fB \ \-\-order\fB= <order>
Sort the output in one of two ways:
.INDENT 7.0
.IP \(bu 2
Use \(aqalpha\(aq to order alphabetically (default)
.IP \(bu 2
Use \(aqsize\(aq to order by bundle size (smaller to larger)
.UNINDENT
.UNINDENT
.SS diagnose
.INDENT 0.0
.INDENT 3.5
Perform system software installation verification. The program will
obtain all the manifests needed from version url and content url to
establish whether the system software is correctly installed and not
overwritten, modified, missing or otherwise incorrect (permissions, etc.).
.sp
After obtaining the proper resources, all files that are under
control of the software update program are verified according to the
manifest data
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Diagnose against the specified manifest VERSION.
.TP
.B  \-x\fP,\fB  \-\-force
Attempt to proceed even if non\-critical errors found.
.TP
.B  \-q\fP,\fB  \-\-quick
Omit checking hash values. Instead only looks for missing files
and directories and/or symlinks.
.TP
.BI \-B \ <bundles>\fR,\fB \ \-\-bundles\fB= <bundles>
Forces swupd to only diagnose the (comma separated) list of bundles provided.
.sp
Examples:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB\-\-bundles xterm,vim\fP
.INDENT 2.0
.INDENT 3.5
Diagnoses only bundles \fIxterm\fP and \fIvim\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B  \-Y\fP,\fB  \-\-picky
Also list files which should not exist. Only files listed in the
manifests should exist. By default swupd only looks for these
files at \fB/usr\fP, this path can be changed using \fB\-\-picky\-tree\fP\&.
Some paths at \fB/usr\fP are skipped by default:
\fB/usr/lib/modules\fP, \fB/usr/lib/kernel\fP, \fB/usr/local\fP
and \fB/usr/src\fP\&. These paths can be changed using
\fB\-\-picky\-whitelist\fP\&.
.TP
.BI \-X \ <path>\fR,\fB \ \-\-picky\-tree\fB= <path>
Changes the path where \fB\-\-picky\fP and
\fB\-\-extra\-files\-only\fP looks for extra files. To be specified as
absolute PATH.
The default path is \fB/usr\fP\&.
.TP
.BI \-w \ <regex>\fR,\fB \ \-\-picky\-whitelist\fB= <regex>
Any path matching the POSIX extended regular expression regex is ignored by \fB\-\-picky\fP\&. The given expression is always
wrapped in \fB^(\fP and \fB)$\fP and thus has to match the entire path.
Matched directories get skipped completely.
.sp
The default is to ignore \fB/usr/lib/kernel\fP,
\fB/usr/lib/modules\fP, \fB/usr/src\fP and \fB/usr/local\fP\&.
.sp
Examples:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB/var|/etc/machine\-id\fP
.INDENT 2.0
.INDENT 3.5
Ignores \fB/var\fP or \fB/etc/machine\-id\fP, regardless of
whether they are directories or something else. In the
usual case that \fB/var\fP is a directory, also everything
inside it is ignored because the directory gets skipped
while scanning the directory tree.
.UNINDENT
.UNINDENT
.IP \(bu 2
empty string or \fB^$\fP
.INDENT 2.0
.INDENT 3.5
Matches nothing, because \fIpaths\fP are never empty.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B  \-\-extra\-files\-only
Like \fB\-\-picky\fP, but it only looks for extra files.
It omits checking hash values, and for missing files, directories and/or
symlinks.
.TP
.B  \-\-file
Forces swupd to only diagnose the specified file or directory
(recursively).
.UNINDENT
.SS repair
.INDENT 0.0
.INDENT 3.5
Correct any issues found. This will overwrite incorrect file content,
add missing files and do additional corrections, permissions, etc.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Repair against the specified manifest
version.
.TP
.B  \-x\fP,\fB  \-\-force
Attempt to proceed even if non\-critical errors found.
.TP
.B  \-q\fP,\fB  \-\-quick
Omit repairing corrupt files. Instead only add missing files
and directories and/or symlinks.
.TP
.BI \-B \ <bundles>\fR,\fB \ \-\-bundles\fB= <bundles>
Forces swupd to only repair the (comma separated) list
of bundles provided.
.sp
Examples:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB\-\-bundles xterm,vim\fP
.INDENT 2.0
.INDENT 3.5
Repairs only bundles \fIxterm\fP and \fIvim\fP\&.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B  \-Y\fP,\fB  \-\-picky
Also removes files which should not exist. Only files listed
in the manifests should exist. By default swupd only looks for these
files at \fB/usr\fP, this path can be changed using \fB\-\-picky\-tree\fP\&.
Some paths at \fB/usr\fP are skipped by default:
\fB/usr/lib/modules\fP, \fB/usr/lib/kernel\fP, \fB/usr/local\fP
and \fB/usr/src\fP\&. These paths can be changed using
\fB\-\-picky\-whitelist\fP\&.
.TP
.BI \-X \ <path>\fR,\fB \ \-\-picky\-tree\fB= <path>
Changes the path where \fB\-\-picky\fP and
\fB\-\-extra\-files\-only\fP looks for extra files. To be specified as
absolute PATH. The default path is \fB/usr\fP\&.
.TP
.BI \-w \ <regex>\fR,\fB \ \-\-picky\-whitelist\fB= <regex>
Any path matching the POSIX extended regular
expression regex is ignored by \fB\-\-picky\fP\&. The given expression is
always wrapped in \fB^(\fP and \fB)$\fP and thus has to match the entire
path. Matched directories get skipped completely.
.sp
The default is to ignore \fB/usr/lib/kernel\fP,
\fB/usr/lib/modules\fP, \fB/usr/src\fP and \fB/usr/local\fP\&.
.sp
Examples:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB/var|/etc/machine\-id\fP
.INDENT 2.0
.INDENT 3.5
Ignores \fB/var\fP or \fB/etc/machine\-id\fP, regardless of
whether they are directories or something else. In the
usual case that \fB/var\fP is a directory, also everything
inside it is ignored because the directory gets skipped
while scanning the directory tree.
.UNINDENT
.UNINDENT
.IP \(bu 2
empty string or \fB^$\fP
.INDENT 2.0
.INDENT 3.5
Matches nothing, because paths are never empty.
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.B  \-\-extra\-files\-only
Like \fB\-\-picky\fP, but it only removes extra files. It omits
repairing corrupt files, and adding missing files, directories and/or
symlinks.
.TP
.B  \-\-file
Forces swupd to only repair the specified file or directory
(recursively).
.UNINDENT
.SS os\-install
.INDENT 0.0
.INDENT 3.5
Perform system software installation in the specified location. Install
all files into \fI{path}\fP as specified by the \fBswupd os\-install {path}\fP
option. Useful to generate a new system root. The only bundle that will
be installed by default is \fBos\-core\fP unless more bundles are specified
with the \fB\-\-bundles\fP option.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-V \ <version>\fR,\fB \ \-\-version\fB= <version>
Install the specified version of the OS.
.TP
.B  \-x\fP,\fB  \-\-force
Attempt to proceed even if non\-critical errors found.
.TP
.BI \-B \ <bundles>\fR,\fB \ \-\-bundles\fB= <bundles>
Include the (comma separated) list of
bundles with the base OS install.
.sp
Examples:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fB\-\-bundles xterm,vim\fP
.INDENT 2.0
.INDENT 3.5
Installs bundles \fIxterm\fP and \fIvim\fP, along with \fIos\-core\fP
(installed by default).
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.TP
.BI \-s \ <path>\fR,\fB \ \-\-statedir\-cache\fB= <path>
After checking for content in the
\fIstatedir\fP, check the \fIstatedir\-cache\fP before downloading it over the
network.
.TP
.B  \-\-download
Do not perform an install, instead download all resources
needed to perform the install, and exit.
.TP
.B  \-\-skip\-optional
Do not install optional bundles (\fIalso\-add\fP flag in
Manifests).
A bundle may include other bundles that will also get installed
when installing the bundle that includes them. This included bundles
can be either optional, or mandatory. Optional bundles can be skipped
at install time by using this option.
.UNINDENT
.SS mirror
.INDENT 0.0
.INDENT 3.5
Configure a \fImirror URL\fP for swupd to use instead of the defaults on the
system or compiled into the swupd binary.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.BI \-s \ <url>\fR,\fB \ \-\-set\fB= <url>
Set the \fIcontent\fP and \fIversion URLs\fP to URL by adding
configuration files to \fB<path>/etc/swupd/mirror_contenturl\fP and
\fB<path>/etc/swupd/mirror_versionurl\fP
.TP
.B  \-U\fP,\fB  \-\-unset
Remove the \fIcontent\fP and \fIversion URL\fP configuration by removing
\fB<path>/etc/swupd\fP
.UNINDENT
.SS clean
.INDENT 0.0
.INDENT 3.5
Removes files cached by swupd.
.sp
Note that removing these files may cause swupd to perform slower the next time
it is used since it may need to download some files from the update server
again.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-\-all
.nf
Removes all the content including recent metadata.
.fi
.sp
.TP
.B  \-\-dry\-run
Just prints files that would be removed.
.UNINDENT
.SS hashdump
.INDENT 0.0
.INDENT 3.5
Calculates and print the Manifest hash for a specific file on disk.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B  \-n\fP,\fB  \-\-no\-xattrs
Ignore extended attributes when calculating hash.
.TP
.BI \-p \ <path>\fR,\fB \ \-\-path\fB= <path>
Specify the PATH to use for operations. This can be
used to point to a chroot installation of the OS or a custom mount.
.UNINDENT
.SS 3rd\-party
.INDENT 0.0
.INDENT 3.5
Manages 3rd\-party repositories and content installed from them. A 3rd\-party
repository enables the distribution of user produced content.
.sp
The following subcommands are available to manage \fI3rd\-party repositories\fP:
.INDENT 0.0
.IP \(bu 2
\fBadd\fP
.sp
Adds a 3rd\-party repository.
.INDENT 2.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBforce\fP
.UNINDENT
.sp
Attempt to proceed with the removal of the repo even if non\-critical
errors found.
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBremove\fP
.sp
Removes a 3rd\-party repository along with all the content installed
from it from the system.
.INDENT 2.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBforce\fP
.UNINDENT
.sp
Attempt to proceed with the removal of the repo even if non\-critical
errors found.
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBlist\fP
.sp
Lists the 3rd\-party repositories available to the system. These
repositories must have been previously added using \fBswupd 3rd\-party add\fP\&.
.UNINDENT
.sp
Most of the swupd subcommands used for managing \fIupstream\fP content are
supported to manage \fI3rd\-party\fP content along with most of their options.
To use these subcommands for 3rd\-party content, it is necessary to use the
\fB3rd\-party\fP subcommand followed by the desired operation to be performed.
.sp
This is the syntax for 3rd\-party operations to manage content:
.sp
\fB$ swupd 3rd\-party <subcommand> [option(s)]\fP
.sp
Example:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
\fBswupd 3rd\-party bundle\-add my_bundle\fP
.sp
Looks for the 3rd\-party bundle \fImy_bundle\fP among all the available
3rd\-party repositories, and installs it in the system as long as
it is found in one, and only one, repository. If the bundle exists
in more than one 3rd\-party repository, users are required to specify
the repository to install it from by using the \fB\-\-repo\fP option.
.sp
There is no need to specify the 3rd\-party repository if the bundle
name is unique among 3rd\-party repositories, even if a bundle with
the same name exists in the upstream update server. Bundles from
3rd\-party repositories are installed in a different location so they
don\(aqt clash with upstream bundles.
.IP \(bu 2
\fBswupd 3rd\-party update \-\-repo my_repo\fP
.sp
Performs a software update for content installed from the 3rd\-party
repository \fImy_repo\fP\&. If no repository is specified, content from
all 3rd\-party repositories is updated.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
All 3rd\-party content is installed in the following location:
\fB/opt/3rd\-party/<bundle_name>/\fP
.sp
The following subcommands are available to manage \fI3rd\-party content\fP:
.INDENT 0.0
.IP \(bu 2
\fBupdate\fP
.sp
Update to latest version of a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd update\fP section.
.IP \(bu 2
\fBbundle\-add\fP
.sp
Installs a bundle from a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd bundle\-add\fP section.
.IP \(bu 2
\fBbundle\-remove\fP
.sp
Remove a bundle from a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd bundle\-remove\fP section.
.IP \(bu 2
\fBbundle\-list\fP
.sp
List bundles from a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd bundle\-list\fP section.
.IP \(bu 2
\fBbundle\-info\fP
.sp
Display information about a bundle in a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd bundle\-info\fP section.
.IP \(bu 2
\fBdiagnose\fP
.sp
Verify content from a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd diagnose\fP section.
.IP \(bu 2
\fBrepair\fP
.sp
Repair local issues relative to a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd repair\fP section.
.IP \(bu 2
\fBcheck\-update\fP
.sp
Check if a new version of a 3rd\-party repository is available.
For information about the options for this command please refer to
the \fBswupd check\-update\fP section.
.IP \(bu 2
\fBclean\fP
.sp
Clean cached files of a 3rd\-party repository.
For information about the options for this command please refer to
the \fBswupd clean\fP section.
.UNINDENT
.UNINDENT
.UNINDENT
.SH FILES
.sp
/usr/share/defaults/swupd
.INDENT 0.0
.INDENT 3.5
Sometimes a set of flags is always used for one, or many swupd commands. The
\fBswupd configuration file\fP provides a convenient way of persistently define
these flags so they don\(aqt need to be specified every time a command is run.
.sp
The configuration file is an INI type of file that consists of sections, each led
by a [section] header, followed by key/value entries separated by a \(aq=\(aq character.
Note that there should be no whitespace between key=value. The configuration
file may include comments, prefixed by either the \(aq#\(aq or the \(aq;\(aq characters.
.sp
There can be one section for each swupd command (e.g. [bundle\-add], [update], etc.)
and one for global options (e.g. [GLOBAL]). Global options can be specified in the
either in the GLOBAL section, in a command section, or in both. Global options
specified in the command section have higher precedence than those specified in the
GLOBAL section, so it is possible to define a GLOBAL option that will apply to all
swupd command except for that one overwritten in the command section.
.sp
A sample swupd configuration file can be found at this location (this file should not
be modified):
\fI/usr/share/defaults/swupd\fP
.sp
To use it, copy it to \fI/etc/swupd\fP where swupd reads the configuration from.
.UNINDENT
.UNINDENT
.SH EXIT STATUS
.sp
On success, \fB0\fP is returned. A \fBnon\-zero\fP return code signals a failure.
.sp
If the subcommand \fBcheck\-update\fP was specified, the program returns
\fB0\fP if an update is available, \fB1\fP if no update available, and a
return value higher than \fB1\fP signals a failure.
.sp
If the subcommand was \fBautoupdate\fP without options, then the program
returns \fB0\fP if automatic updating is enabled.
.sp
If the subcommand was \fBdiagnose\fP, then the program returns \fB0\fP if the system
is consistent at the end of the process or \fB1\fP if there are invalid/missing
files in the system.
.sp
The non\-zero return codes for other operations are listed here:
.sp
\fB2\fP     A required bundle was removed or was attempted to be removed
.nf
\fB3\fP     The specified bundle is invalid
\fB4\fP     Unable to download or read MoM manifest
\fB5\fP     Unable to delete a file
\fB6\fP     Unable to rename a directory
\fB7\fP     Unable to create a file
\fB8\fP     Unable to recursively load included manifests
\fB9\fP     Unable to obtain lock on state directory
\fB10\fP    Unable to rename a file
\fB11\fP    Unable to initialize curl agent
\fB12\fP    Initialization error
\fB13\fP    Bundle not tracked on system
\fB14\fP    Unable to load manifest into memory
\fB15\fP    Invalid command\-line option
\fB16\fP    Unable to connect to update server
\fB17\fP    File download issue
\fB18\fP    Unable to untar a file
\fB19\fP    Unable to create required directory
\fB20\fP    Unable to determine current version of the OS
\fB21\fP    Unable to initialize signature verification
\fB22\fP    System time is off by a large margin
\fB23\fP    Pack download issue
\fB24\fP    Unable to verify server SSL certificate
\fB25\fP    There is not enough disk space left (or it cannot be determined)
\fB26\fP    The required path was not found in any manifest
\fB27\fP    Unexpected condition found
\fB28\fP    Unable to execute another program in a subprocess
\fB29\fP    Unable to list the content of a directory
\fB30\fP    An error occurred computing the hash of a file
\fB31\fP    Unable to get current system time
\fB32\fP    Unable to write a file
\fB34\fP    swupd ran out of memory
\fB35\fP    Unable to fix/replace/delete one or more files
\fB36\fP    Unable to execute binary, is either missing or invalid
\fB37\fP    Invalid 3rd\-party repository (not found)
\fB38\fP    File is missing or invalid
.fi
.sp
.SH SEE ALSO
.nf
\fBswupd\-update.service\fP(4),  \fBswupd\-update.timer\fP(4),  \fBupdate\-triggers.target\fP(4),  \fBmixer\fP(1),  \fBos\-format\fP(7)
.fi
.sp
.nf
Official repository     \fI\%https://github.com/clearlinux/swupd\-client/\fP
Official documentation  \fI\%https://clearlinux.org/documentation/\fP
.fi
.sp
.SH COPYRIGHT
(C) 2020 Intel Corporation, CC-BY-SA-3.0
.\" Generated by docutils manpage writer.
.
